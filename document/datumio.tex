\section{Writing and reading external representations}
\label{datumiosection}

These procedures convert datums to their external representations and
vice versa.  See section~\ref{readsyntaxchapter}.

FIXME: separate library

\begin{entry}{%
\proto{put-datum}{ output-port datum}{procedure}
\rproto{put-datum}{ output-port datum transcoder}{procedure}}

Writes an external representation of \var{datum} to \var{output-port}.
Which external representation is chosen is implementation-dependent.

\begin{note}
  The {\cf put-datum} procedure merely writes the external
  reprentation.  If {\cf put-datum} is used to write several
  subsequent external representations to an output port, care must be
  taken to delimit them properly so they can be read back in by
  subsequent calls to {\cf get-datum}.
\end{note}
\end{entry}

\begin{entry}{%
\proto{get-datum}{ input-port}{procedure}
\rproto{get-datum}{ input-port transcoder}{procedure}}
 
Reads an external representation from \var{input-port} and returns the
datum it represents.  The {\cf get-datum} procedure returns the next
datum parsable from the given \var{input-port}, updating
\var{input-port} to point exactly past the end of the external
representation of the object.

Any \meta{intertoken space} (see section~\ref{lexicalsyntaxsection}) in
the input is first skipped.  If an end of file occurs after the
\meta{intertoken space}, the end of file object (see
section~\ref{eofsection}) is returned, the port remains open, and
further calls to {\cf get-datum} will also return the end of file
object.

If a character inconsistent with an external representation is
encountered in the input, an exception with condition type
{\cf\&lexical} is raised.  Also, if the end of file is encountered
after the beginning of an external representation, but the external
representation is incomplete and therefore not parsable, an exception
with condition type {\cf\&lexical} is raised.
\end{entry}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "r6rs"
%%% End: 
