<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd"><!-- DO NOT EDIT THIS FILE-->
<!-- Edit the .tex version instead-->

<html>
<head>
<title>R6RS Library Syntax</title>

<style type="text/css">
<!--
 a:link, a:active, a:visited {color:blue}
 a:hover {color:white; background:blue}
 a.plain:link, a.plain:active, a.plain:visited {color:blue; text-decoration:none}
 a.plain:hover {color:white; text-decoration:none; background:blue}
 table.indent {margin-left: 20px}
 h1 { font-size: 1.75em }
 h2 { font-size: 1.25em }
 h3 { font-size: 1.12em }
 h4 { font-size: 1em }
-->
</style>
</head>
<body>


<p>


<p>
<h1>Title</h1>

<p>
R6RS Library Syntax

<p>
<h1>Authors</h1>

<p>
Matthew Flatt and Kent Dybvig

<p>
<h1>Status</h1>

<p>
This SRFI is being submitted by a member of the Scheme Language Editor's
Committee as part of the R6RS Scheme standardization process.  The purpose
of such "R6RS SRFIs" is to inform the Scheme community of features and
design ideas under consideration by the editors and to allow the community
to give the editors some direct feedback that will be considered during
the design process.

<p>
At the end of the discussion period, this SRFI will be withdrawn.  When
the R6RS specification is finalized, the SRFI may be revised to conform to
the R6RS specification and then resubmitted with the intent to finalize
it.  This procedure aims to avoid the situation where this SRFI is
inconsistent with R6RS.  An inconsistency between R6RS and this SRFI could
confuse some users.  Moreover it could pose implementation problems for
R6RS compliant Scheme systems that aim to support this SRFI.  Note that
departures from the SRFI specification by the Scheme Language Editor's
Committee may occur due to other design constraints, such as design
consistency with other features that are not under discussion as SRFIs.

<p>
<h1>Table of Contents</h1>

<table cellpadding=0 cellspacing=0>



<tr><td align="right"><b>1.&nbsp;</b><td><b><a class=plain href="./library.html#g0">Abstract</a></b></td></tr>



<tr><td align="right"><b>2.&nbsp;</b><td><b><a class=plain href="./library.html#g1">Rationale<a name="sec:rationale"></a></a></b></td></tr>



<tr><td align="right"><b>3.&nbsp;</b><td><b><a class=plain href="./library.html#g2">Specification<a name="sec:specification"></a></a></b></td></tr>


<tr><td></td><td><table cellpadding=0 cellspacing=0>
<tr><td><b>3.1.&nbsp;</b></td><td><b><a class=plain href="./library.html#g3">Library form</a></b></td></tr>



<tr><td><b>3.2.&nbsp;</b></td><td><b><a class=plain href="./library.html#g4">Syntax and Semantics</a></b></td></tr>



<tr><td><b>3.3.&nbsp;</b></td><td><b><a class=plain href="./library.html#g5">Import phases<a name="sec:phases"></a></a></b></td></tr>



<tr><td><b>3.4.&nbsp;</b></td><td><b><a class=plain href="./library.html#g6">Eval<a name="sec:eval"></a></a></b></td></tr>


</table></td></tr>
<tr><td align="right"><b>4.&nbsp;</b><td><b><a class=plain href="./library.html#g7">Examples</a></b></td></tr>



<tr><td align="right"><b>5.&nbsp;</b><td><b><a class=plain href="./library.html#g8">Reference Implementation<a name="sec:implementation"></a></a></b></td></tr>



<tr><td align="right"><b>6.&nbsp;</b><td><b><a class=plain href="./library.html#g9">Issues<a name="sec:issues"></a></a></b></td></tr>


<tr><td></td><td><table cellpadding=0 cellspacing=0>
<tr><td><b>6.1.&nbsp;</b></td><td><b><a class=plain href="./library.html#g10">Simpler library names</a></b></td></tr>



<tr><td><b>6.2.&nbsp;</b></td><td><b><a class=plain href="./library.html#g11">Expanding <tt>import</tt> and <tt>export</tt> form</a></b></td></tr>



<tr><td><b>6.3.&nbsp;</b></td><td><b><a class=plain href="./library.html#g12"><tt>co-export</tt> form</a></b></td></tr>



<tr><td><b>6.4.&nbsp;</b></td><td><b><a class=plain href="./library.html#g13">Implicit phasing</a></b></td></tr>


</table></td></tr>
<tr><td align="right"><b>7.&nbsp;</b><td><b><a class=plain href="./library.html#g14">Acknowledgments</a></b></td></tr>



<tr><td align="right"><b>8.&nbsp;</b><td><b><a class=plain href="./library.html#g15">References</a></b></td></tr>



<tr><td align="right"><b>9.&nbsp;</b><td><b><a class=plain href="./library.html#g20">Copyright</a></b></td></tr>

  
  
 
</table>


<p>

<a name="g0"></a>

<h1><a name="./library:h0"></a>1. Abstract</h1>



<p>
The library system presented here is designed to let programmers share
libraries, i.e., code that is intended to be incorporated into larger
programs, and especially into programs that use library code from multiple
sources.  The library system supports macro definitions within libraries,
allows macro exports, and distinguishes the phases in which definitions
and imports are needed.  This SRFI defines a standard notation for
libraries, a semantics for library expansion and execution, and a simple
format for sharing libraries.

<p>

<a name="g1"></a>

<h1><a name="./library:h1"></a>2. Rationale<a name="sec:rationale"></a></h1>



<p>
This standard addresses the following specific goals:

<p>
<ul>
<li>Separate compilation and analysis; no two libraries have to be compiled at the same time (i.e., the meanings of two libraries cannot depend on each other cyclically, and compilation of two different libraries cannot rely on state shared across compilations), and significant program analysis does not require a whole program.
<li>Independent compilation/analysis of unrelated libraries, where "unrelated" means that neither depends on the other through a transitive closure of imports.
<li>Explicit declaration of dependencies, so that the meaning of each identifier is clear at compile time, and so that there is no ambiguity about whether a library needs to be executed for another library's compile time and/or run time.
<li>Namespace management, so that different library producers are unlikely to define the same top-level name. 
</ul>

<p>
It does not address the following:

<p>
<ul>
<li>Mutually dependent libraries.
<li>Separation of library interface from library implementation.
<li>Code outside of a library (e.g., 5 by itself as a program).
<li>Local modules and local imports. 
</ul>


<p>

<a name="g2"></a>

<h1><a name="./library:h2"></a>3. Specification<a name="sec:specification"></a></h1>



<p>

<a name="g3"></a>

<h2><a name="./library:h3"></a>3.1. Library form</h2>



<p>
A library declaration contains the following elements:

<p>
<ul>
<li>a name for the library (possibly compound, with versioning),
<li>a list of import dependencies, where each dependency specifies the
      following:
<ul>
<li>the imported library's name,
<li>the relevant phases, e.g., expand or run time, and
<li>the subset of the library's exports to make available within the
      importing library, and the local names to use within the importing
      library for each of the library's exports,
</ul>
<li>a list of exports, which name a subset of the library's imports and
      definitions, and
<li>a library body, consisting of a sequence of definitions followed
      by a sequence of expressions.
</ul>

<p>

<a name="g4"></a>

<h2><a name="./library:h4"></a>3.2. Syntax and Semantics</h2>



<p>
A library definition is written with the library form:

<p>

<p><tt>(library&nbsp;&lt;library&nbsp;name&gt;<br>

&nbsp;&nbsp;(import&nbsp;&lt;import&nbsp;spec&gt;*)<br>

&nbsp;&nbsp;(export&nbsp;&lt;export&nbsp;spec&gt;*)<br>

&nbsp;&nbsp;&lt;library&nbsp;body&gt;)</tt>
<p>The &lt;library&nbsp;name&gt; specifies the name of the library, the
<tt>import</tt> form specifies the imported bindings, and the
<tt>export</tt> form specifies the exported bindings.
The &lt;library&nbsp;body&gt; specifies the set of definitions, both for local
(unexported) and exported bindings, and the set of initialization
expressions (commands) to be evaluated for their effects.
The exported bindings may be defined within the library or imported into
the library.
Bindings defined with a library are not visible in code that appears
outside of the library unless they are explicitly exported from the
library. 

<p>
No identifier can be imported multiple times, defined multiple times, or
both defined and imported.

<p>
Library names are consist of a sequence of identifiers in parentheses,
followed optionally by a version consisting of a sequence of unsigned
integers:

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;library&nbsp;name&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>(&lt;identifier&gt;<sup>+</sup>)</tt>
                    | <tt>(&lt;identifier&gt;<sup>+</sup>&nbsp;&lt;version&gt;)</tt></TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;version&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>(&lt;uinteger&nbsp;10&gt;<sup>+</sup>)</tt>
</TD></TR></TABLE>

<p>
Each <tt>import&nbsp;spec</tt> specifies a set of bindings to be imported into
the library, the phases in which they are to be available, and the local
names by which they are to be known.

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;import&nbsp;spec&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">&lt;import&nbsp;set&gt;</TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(for&nbsp;&lt;import&nbsp;set&gt;&nbsp;&lt;import&nbsp;phase&gt;*)</tt>
</TD></TR></TABLE>

<p>
Valid import phases are <tt>run</tt>, <tt>expand</tt>, <tt>eval</tt>, and
<tt>(meta&nbsp;<i>n</i>)</tt>, where <tt>run</tt> is an abbreviation for
<tt>(meta&nbsp;0)</tt> and <tt>expand</tt> is an abbreviation for and
<tt>(meta&nbsp;1)</tt>.

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;import&nbsp;phase&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>run</tt> | <tt>expand</tt> | <tt>eval</tt> | <tt>(meta&nbsp;&lt;level&gt;)</tt></TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;level&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">&lt;uinteger&nbsp;10&gt;
</TD></TR></TABLE>

<p>
Phases are discussed in Section&nbsp;<a href="./library.html#g5">3.3</a>.

<p>
An &lt;import&nbsp;set&gt; names a set of bindings from another library, and
possibly specifies local names for the imported bindings.

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;import&nbsp;set&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">&lt;library&nbsp;reference&gt;</TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(only&nbsp;&lt;import&nbsp;set&gt;&nbsp;&lt;identifier&gt;*)</tt></TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(except&nbsp;&lt;import&nbsp;set&gt;&nbsp;&lt;identifier&gt;*)</tt></TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(add-prefix&nbsp;&lt;import&nbsp;set&gt;&nbsp;&lt;identifier&gt;)</tt></TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(rename&nbsp;&lt;import&nbsp;set&gt;&nbsp;(&lt;identifier&gt;&nbsp;&lt;identifier&gt;)*)</tt>
</TD></TR></TABLE>

<p>
A &lt;library&nbsp;reference&gt; identifies a library by its (possibly compound)
name and optionally by its version.

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;library&nbsp;reference&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">&lt;identifier&gt;
                    | <tt>(&lt;identifier&gt;<sup>+</sup>)</tt>
                    | <tt>(&lt;identifier&gt;<sup>+</sup>&nbsp;&lt;version&nbsp;reference&gt;)</tt></TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;version&nbsp;reference&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>(&lt;uinteger&nbsp;10&gt;<sup>+</sup>)</tt>
                         | &lt;version&nbsp;condition&gt;</TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;version&nbsp;condition&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>(&lt;uinteger&nbsp;10&gt;<sup>+</sup>)</tt></TD></TR><TR><TD nowrap align="left">
                        </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(&gt;=&nbsp;&lt;uinteger&nbsp;10&gt;)</tt></TD></TR><TR><TD nowrap align="left">
                        </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(&lt;=&nbsp;&lt;uinteger&nbsp;10&gt;)</tt></TD></TR><TR><TD nowrap align="left">
                        </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(and&nbsp;&lt;version&nbsp;condition&gt;<sup>+</sup>)</tt></TD></TR><TR><TD nowrap align="left">
                        </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(or&nbsp;&lt;version&nbsp;condition&gt;<sup>+</sup>)</tt></TD></TR><TR><TD nowrap align="left">
                        </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(not&nbsp;&lt;version&nbsp;condition&gt;)</tt>
</TD></TR></TABLE>

<p>
The sequence of identifiers in the importing library's
<tt>library&nbsp;reference</tt> must match the sequence of identifiers in the
imported library's <tt>library&nbsp;name</tt>.
The importing library's &lt;version&nbsp;reference&gt; specifies a predicate on a
prefix of the imported library's &lt;version&gt;.
Each integer must match exactly and each condition has the expected meaning.
Everything beyond the prefix specified in the version reference matches
unconditionally.
When more than one library is identified by a library reference, the
choice of libraries is determined in some implementation-dependent manner.

<p>
To avoid problems such as incompatible types and replicated state, two
libraries whose library names contain the same sequence of identifiers but
whose versions do match cannot co-exist in the same program.

<p>
By default, all of an imported library's exported bindings are made
visible within an importing library using the names given to the bindings
by the imported library.
The preceise set of bindings to be imported and the names of those
bindings can be adjusted with the <tt>only</tt>, <tt>except</tt>,
<tt>add-prefix</tt>, and <tt>rename</tt> forms as described below.

<p>
<ul>
<li>The <tt>only</tt> form produces a subset of the bindings from another
&lt;import&nbsp;set&gt;, including only the listed
&lt;identifier&gt;s; if any of the included &lt;identifier&gt;s is not in
&lt;import&nbsp;set&gt;, an exception is raised.
<li>The <tt>except</tt> form produces a subset of the bindings from another
&lt;import&nbsp;set&gt;, including all but the listed
&lt;identifier&gt;s; if any of the excluded &lt;identifier&gt;s is not in
&lt;import&nbsp;set&gt;, an exception is raised.
<li>The <tt>add-prefix</tt> adds a prefix to each
name from another &lt;import&nbsp;set&gt;.
<li>The <tt>rename</tt> form, for each pair of identifiers (&lt;identifier&gt;
&lt;identifier&gt;), removes a binding from the set from &lt;import&nbsp;set&gt;,
and adds it back with a different name. 
The first identifier is the original name, and the
second identifier is the new name. 
If the original name is not in &lt;import&nbsp;set&gt;, or
if the new name is already in &lt;import&nbsp;set&gt;, an exception is raised.
</ul>

<p>
An &lt;export&nbsp;set&gt; names a set of imported and locally defined bindings to
be exported, possibly giving them different external names.

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;export&nbsp;spec&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">&lt;export&nbsp;set&gt;</TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(for&nbsp;(&lt;export&nbsp;set&gt;*)&nbsp;&lt;import&nbsp;phase&gt;*)</tt></TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;export&nbsp;set&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">&lt;identifier&gt;</TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(rename&nbsp;(&lt;identifier&gt;&nbsp;&lt;identifier&gt;)*)</tt>
</TD></TR></TABLE>

<p>
In an &lt;export&nbsp;set&gt;, an &lt;identifier&gt; names a single binding defined
within the library or imported, where the external name for the export is
the same as the name of the binding within the library. 
A <tt>rename</tt> set exports the binding named by the first
&lt;identifier&gt; in each pair, using the second &lt;identifier&gt; as the
external name.

<p>
The &lt;library&nbsp;body&gt; of a <tt>library</tt> form contains definitions for
local and exported bindings and initalization expressions to be evaluated
when the library is invoked.

<p>
A &lt;library&nbsp;body&gt; is like <tt>lambda</tt> body (see below) except that
the latter requires the body to contain at least one expression.

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;library&nbsp;body&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">&lt;common&nbsp;body&gt;</TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;common&nbsp;body&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">&lt;declaration&gt;* &lt;definition&gt;* &lt;command&gt;*</TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left">&lt;declaration&gt;* &lt;definition&gt;* &lt;body&nbsp;begin&gt; &lt;command&gt;*</TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;body&nbsp;begin&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>(begin&nbsp;&lt;common&nbsp;body&gt;)</tt> | &lt;derived&nbsp;body&nbsp;begin&gt;
</TD></TR></TABLE>

<p>
The &lt;body&nbsp;begin&gt; permitted to allow macros to expand into a sequence
including both definitions and expressions at the point where the
sequence of definitions ends and the sequence of expressions begins.
A &lt;derived&nbsp;body&nbsp;begin&gt; is a syntactic abstraction that expands into
a &lt;body&nbsp;begin&gt;.

<p>
Declarations allow a program to specify various <i>qualities</i> for the
evaluated code.
Their interpretation is implementation dependent.

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;declaration&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>(declare&nbsp;&lt;declare&nbsp;spec&gt;)</tt> | &lt;derived&nbsp;declaration&gt;</TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;declare&nbsp;spec&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>unsafe</tt> | &lt;quality&gt; | <tt>(&lt;quality&gt;&nbsp;&lt;priority&gt;)</tt></TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;quality&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>safe</tt> | <tt>fast</tt> | <tt>small</tt> | <tt>debug</tt></TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;priority&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>0</tt> | <tt>1</tt> | <tt>2</tt> | <tt>3</tt>
</TD></TR></TABLE>

<p>
A &lt;derived&nbsp;declaration&gt; is a syntactic abstraction that expands into
a &lt;declaration&gt;.

<p>
Definitions consist of syntax definitions, variable definitions,
<tt>indirect-export</tt> forms, <tt>begin</tt> forms containing
only definitions, and derived definitions.

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;definition&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">&lt;syntax&nbsp;definition&gt;</TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left">&lt;variable&nbsp;definition&gt;</TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(indirect-export&nbsp;&lt;indirect&nbsp;spec&gt;*)</tt></TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(begin&nbsp;&lt;declaration&gt;*&nbsp;&lt;definition&gt;*)</tt></TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left">&lt;derived&nbsp;definition&gt;</TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;syntax&nbsp;definition&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>(define-syntax&nbsp;&lt;keyword&gt;&nbsp;&lt;transformer&nbsp;spec&gt;)</tt></TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;variable&nbsp;definition&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>(define&nbsp;&lt;variable&gt;)</tt></TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(define&nbsp;&lt;variable&gt;&nbsp;&lt;expression&gt;)</tt></TD></TR><TR><TD nowrap align="left">
  </TD><TD nowrap align="center">|</TD><TD nowrap align="left"><tt>(define&nbsp;(&lt;variable&gt;&nbsp;&lt;def&nbsp;formals&gt;)&nbsp;&lt;body&gt;)</tt></TD></TR><TR><TD nowrap align="left">
</TD></TR><TR><TD nowrap align="left">
&lt;body&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">&lt;common&nbsp;body&gt; &lt;expression&gt;
</TD></TR></TABLE>

<p>
A &lt;derived&nbsp;definition&gt; is a syntactic abstraction that expands into
a &lt;definition&gt;.

<p>
The production for &lt;body&gt; is also relevant for <tt>lambda</tt>
bodies, recalling that &lt;lambda&nbsp;expression&gt; is defined as follows.

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;lambda&nbsp;expression&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>(lambda&nbsp;&lt;formals&gt;&nbsp;&lt;body&gt;)</tt>
</TD></TR></TABLE>

<p>
A &lt;body&gt; is like a &lt;library&nbsp;body&gt; except that at least one
expression must be present. 

<p>
The definitions of a &lt;library&nbsp;body&gt; or &lt;body&gt; are mutually
recursive.
The transformer expressions and transformer bindings are created
from left to right, as described in the R6RS <tt>syntax-case</tt>
SRFI&nbsp;[<a class=citation href="./library.html#g16">1</a>].
The variable-definition right-hand-side expressions are evalated
from left to right, as if in an implicit <tt>letrec*</tt>,
and the body expressions are also evaluated from left to right
after the variable-definition right-hand-side expressions.

<p>
An &lt;indirect&nbsp;spec&gt; declares a set of identifiers to be indirectly
exported when a given keyword is exported.

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;indirect&nbsp;spec&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left"><tt>(&lt;keyword&gt;&nbsp;&lt;identifier&gt;*)</tt>
</TD></TR></TABLE>

<p>
The specifier declares that the transformer bound to the specified
&lt;keyword&gt; may expand into references to the &lt;identifier&gt;s and that
these &lt;identifier&gt;s are to be "indirectly exported" for this purpose
if the &lt;keyword&gt; is exported.
An exception is raised if any of the specified &lt;keyword&gt;s is not
defined as a macro within the library, or if any of the associated
&lt;identifiers&gt;s is not defined within the library.
An exception is also raised if a macro used outside of its defining
library expands into a reference to an identifier that is defined within
or imported into the library but is neither directly nor indirectly
exported from the library.
Identifiers that are not directly exported are not otherwise visible
outside of the defining library.

<p>
An <tt>indirect-export</tt> may appear anywhere that other definitions may
appear, so that syntactic abstractions that expand into syntax definitions
can also produce any necessary <tt>indirect-export</tt> forms without
concern for the context.
They are ignored everywhere except in a &lt;library&nbsp;body&gt;.

<p>
All exported bindings, explicit or implicit, are immutable both in the
exporting and importing libraries.

<p>

<a name="g5"></a>

<h2><a name="./library:h5"></a>3.3. Import phases<a name="sec:phases"></a></h2>



<p>
All bindings imported via a library's <tt>import</tt> form are
<i>visible</i> throughout the library's &lt;library&nbsp;body&gt;.
An exception is raised, however, if a binding is used out of its declared
phase(s):

<p>
<ul>
<li>Bindings used in run-time code must be imported "for <tt>run</tt>" or
"for <tt>(meta&nbsp;0)</tt>."
<li>Bindings used in the body of a transformer (appearing on the
right-hand-side of a transformer binding) in run-time code must be
imported "for <tt>expand</tt>" or "for <tt>(meta&nbsp;1)</tt>,
<li>Bindings used in the body of a transformer appearing within the body of a
transformer in run-time code must be imported "for <tt>(meta&nbsp;2)</tt>,"
and so on.
</ul>

<p>
The import phases of an imported binding are determined by the enclosing
<tt>for</tt> form, if any, in the <tt>import</tt> form of the importing
library, otherwise the enclosing <tt>for</tt> form, if any, in the
<tt>export</tt> form of the exporting library. 
If neither is given, then the binding is imported "for <tt>run</tt>" only.

<p>
The import phases thus implicitly determine when information about a
library must be available and also when the various forms contained within
a library must be evaluated.

<p>
Every library can be characterized by expand-time information (minimally,
its imported libraries, a list of the exported keywords, a list of the
exported variables, and code to evaluate the transformer expressions) and
run-time information (minimally, code to evaluate the variable definition
right-hand-side expressions, and code to evaluate the body expressions).
The expand-time information must be available to expand references to
any exported binding, and the run-time information must be available to
evaluate references to any exported variable binding.

<p>
If any of a library's bindings is imported by another library "for
<tt>expand</tt>" (or for any meta level greater than 0) both expand-time and
run-time information for the first library is made available when the second
library is expanded.
If any of a library's bindings is imported by another library "for
<tt>run</tt>," the expand-time information for the first library is made available when
the second library is expanded, and the run-time information for the first
library is made available when the run-time information for the second library
is made available.
If any of a library's bindings is imported by another library "for
<tt>eval</tt>," both expand-time and run-time information for the first library
is made available when the run-time information for the second library
is made available.

<p>
We must also consider when the code to evaluate a library's transformer
expressions is executed and when the code to evaluate the library's
variable-definition right-hand-side expressions and body expressions is
executed.
We refer to executing the transformer expressions as <i>visiting</i>
the library and to executing the variable-definition right-hand-side 
expressions and body expressions as <i>invoking</i> the library.
A library must be visited before code that uses its bindings can be
expanded and invoked before code that uses its bindings can be executed.
Visiting or invoking a library may also trigger the visiting or
invoking of other libraries.

<p>
More precisely, visiting a library at phase <i>N</i> causes the system to:

<p>
<ul>
<li>Visit at phase <i>N</i> any library that is imported by this library
      "for <tt>run</tt>" and that is not yet visited at phase <i>N</i>.
<li>Visit and invoke at phase <i>N</i> + <i>M</i> any library that is imported by this
      library "for <tt>(meta&nbsp;<i>M</i>)</tt> and that is not yet invoked at
      phase <i>N</i> + <i>M</i>.
<li>Evaluate the library's transformer expressions.
</ul>

<p>
The order in which imported libraries are visited and invoked is not
defined, but imported libraries must be visited and invoked before the
library's transformer expressions are evaluated.

<p>
Similarly, invoking a library at meta phase <i>N</i> causes the system to:

<p>
<ul>
<li>Invoke at phase <i>N</i> any library that is imported by this library
      "for <tt>run</tt>" and that is not yet invoked at phase <i>N</i>.
<li>Evaluate the library's variable-definition right-hand-side and body
      expressions.
</ul>

<p>
The order in which imported libraries are invoked is not defined, but
imported libraries must be invoked before the library's variable-definition
right-hand-side and body expressions are evaluated.

<p>
The bindings established by visiting or invoking a library at a given
phase are entirely separate from the bindings established by visiting or
invoking the library at any other phase, preventing information from being
shared through these bindings across phases.

<p>

<a name="g6"></a>

<h2><a name="./library:h6"></a>3.4. Eval<a name="sec:eval"></a></h2>



<p>
The <tt>eval</tt> procedure accepts two arguments, an expression to
evaluate, represented as an s-expression, and an environment:

<p>

<p><tt>(eval&nbsp;<i>expression</i>&nbsp;<i>environment</i>)</tt>
<p>Environments can be constructed with the <tt>environment</tt> procedure,
which accepts a set of import specifiers represented as s-expressions.

<p>

<p><tt>(environment&nbsp;<i>import-spec</i>&nbsp;...)&nbsp;<img src="math/library/1.gif" alt="<graphic>">&nbsp;<i>environment</i></tt>
<p>The s-expression syntax of an <tt><i>import-spec</i></tt> mirrors the external
syntax of an &lt;import spec&gt;.
For example:

<p>

<p><tt>(eval&nbsp;'(+&nbsp;3&nbsp;4)&nbsp;(environment&nbsp;'(r6rs)))&nbsp;<img src="math/library/1.gif" alt="<graphic>">&nbsp;7</tt>
<p>An exception is raised if the expand-time or run-time information for a
library named in one of the <tt><i>import-specs</i></tt> is not <i>available</i>
when the call to <tt>environment</tt> occurs, in the sense of
Section&nbsp;<a href="./library.html#g5">3.3</a>.

<p>

<a name="g7"></a>

<h1><a name="./library:h7"></a>4. Examples</h1>



<p>
Hello world:

<p>

<p><tt>(library&nbsp;(hello)<br>

&nbsp;&nbsp;(import&nbsp;(r6rs))<br>

&nbsp;&nbsp;(export)<br>

&nbsp;&nbsp;(display&nbsp;"Hello&nbsp;World")<br>

&nbsp;&nbsp;(newline))</tt>
<p>Examples for various &lt;import&nbsp;spec&gt;s and &lt;export&nbsp;spec&gt;s:

<p>

<p><tt>(library&nbsp;(stack)<br>

&nbsp;&nbsp;(import&nbsp;(r6rs))<br>

&nbsp;&nbsp;(export&nbsp;make&nbsp;push!&nbsp;pop!&nbsp;empty!)
<br>
<br>
&nbsp;&nbsp;(define&nbsp;(make)&nbsp;(list&nbsp;'()))<br>

&nbsp;&nbsp;(define&nbsp;(push!&nbsp;s&nbsp;v)&nbsp;(set-car!&nbsp;s&nbsp;(cons&nbsp;v&nbsp;(car&nbsp;s))))<br>

&nbsp;&nbsp;(define&nbsp;(pop!&nbsp;s)&nbsp;(let&nbsp;([v&nbsp;(caar&nbsp;s)])<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(set-car!&nbsp;s&nbsp;(cdar&nbsp;s))<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v))<br>

&nbsp;&nbsp;(define&nbsp;(empty!&nbsp;s)&nbsp;(set-car!&nbsp;s&nbsp;'())))
<br>
<br>
(library&nbsp;(balloons)<br>

&nbsp;&nbsp;(import&nbsp;(r6rs))<br>

&nbsp;&nbsp;(export&nbsp;make&nbsp;push&nbsp;pop)
<br>
<br>
&nbsp;&nbsp;(define&nbsp;(make&nbsp;w&nbsp;h)&nbsp;(cons&nbsp;w&nbsp;h))<br>

&nbsp;&nbsp;(define&nbsp;(push&nbsp;b&nbsp;amt)&nbsp;(cons&nbsp;(-&nbsp;(car&nbsp;b)&nbsp;amt)&nbsp;(+&nbsp;(cdr&nbsp;b)&nbsp;amt)))<br>

&nbsp;&nbsp;(define&nbsp;(pop&nbsp;b)&nbsp;(display&nbsp;"Boom!&nbsp;")&nbsp;<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(display&nbsp;(*&nbsp;(car&nbsp;b)&nbsp;(cdr&nbsp;b)))&nbsp;<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(newline)))
<br>
<br>
(library&nbsp;(party)<br>

&nbsp;&nbsp;(import&nbsp;(r6rs)<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(only&nbsp;(stack)&nbsp;make&nbsp;push!&nbsp;pop!)&nbsp;;&nbsp;not&nbsp;empty!<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(add-prefix&nbsp;(balloons)&nbsp;balloon:))<br>

&nbsp;&nbsp;;;&nbsp;Total&nbsp;exports:&nbsp;make,&nbsp;push,&nbsp;push!,&nbsp;make-party,&nbsp;pop!<br>

&nbsp;&nbsp;(export&nbsp;(rename&nbsp;(balloon:make&nbsp;make)<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(balloon:push&nbsp;push))<br>

&nbsp;&nbsp;&nbsp;push!<br>

&nbsp;&nbsp;&nbsp;make-party<br>

&nbsp;&nbsp;&nbsp;(rename&nbsp;(party-pop!&nbsp;pop!)))
<br>
<br>
&nbsp;&nbsp;;;&nbsp;Creates&nbsp;a&nbsp;party&nbsp;as&nbsp;a&nbsp;stack&nbsp;of&nbsp;balloons,&nbsp;starting&nbsp;with<br>

&nbsp;&nbsp;;;&nbsp;&nbsp;two&nbsp;balloons<br>

&nbsp;&nbsp;(define&nbsp;(make-party)<br>

&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;([s&nbsp;(make)])&nbsp;;&nbsp;from&nbsp;stack<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(push!&nbsp;s&nbsp;(balloon:make&nbsp;10&nbsp;10))<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(push!&nbsp;s&nbsp;(balloon:make&nbsp;12&nbsp;9))<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s))<br>

&nbsp;&nbsp;(define&nbsp;(party-pop!&nbsp;p)<br>

&nbsp;&nbsp;&nbsp;&nbsp;(balloon:pop&nbsp;(pop!&nbsp;p))))
<br>
<br>
<br>

(library&nbsp;(main)<br>

&nbsp;&nbsp;(import&nbsp;(r6rs)&nbsp;(party))
<br>
<br>
&nbsp;&nbsp;(define&nbsp;p&nbsp;(make-party))<br>

&nbsp;&nbsp;(pop!&nbsp;p)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;displays&nbsp;"Boom!&nbsp;108"<br>

&nbsp;&nbsp;(push!&nbsp;p&nbsp;(push&nbsp;(make&nbsp;5&nbsp;5)&nbsp;1))<br>

&nbsp;&nbsp;(pop!&nbsp;p))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;displays&nbsp;"Boom!&nbsp;24"</tt>
<p>Examples for macros and phases:

<p>

<p><tt>(library&nbsp;(helper)<br>

&nbsp;&nbsp;(import&nbsp;(r6rs))<br>

&nbsp;&nbsp;(export&nbsp;find-dup)
<br>
<br>
&nbsp;&nbsp;(define&nbsp;(find-dup&nbsp;l)<br>

&nbsp;&nbsp;&nbsp;&nbsp;(and&nbsp;(pair?&nbsp;l)<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;loop&nbsp;((rest&nbsp;(cdr&nbsp;l)))<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cond<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(null?&nbsp;rest)&nbsp;(find-dup&nbsp;(cdr&nbsp;l))]<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(bound-identifier=?&nbsp;(car&nbsp;l)&nbsp;(car&nbsp;rest))&nbsp;(car&nbsp;rest)]<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[else&nbsp;(loop&nbsp;(cdr&nbsp;rest))])))))
<br>
<br>
(library&nbsp;(mvlet)<br>

&nbsp;&nbsp;(improt&nbsp;(r6rs)&nbsp;(import&nbsp;(for&nbsp;(helper)&nbsp;expand))<br>

&nbsp;&nbsp;(export&nbsp;mvlet)
<br>
<br>
&nbsp;&nbsp;(define-syntax&nbsp;mvlet<br>

&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(stx)<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(syntax-case&nbsp;stx&nbsp;()<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(_&nbsp;[(id&nbsp;...)&nbsp;expr]&nbsp;body0&nbsp;body&nbsp;...)<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(not&nbsp;(find-dup&nbsp;(syntax-object-&gt;list&nbsp;(syntax&nbsp;(id&nbsp;...)))))<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(syntax&nbsp;(call-with-values&nbsp;(lambda&nbsp;()&nbsp;expr)&nbsp;<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;(id&nbsp;...)&nbsp;body0&nbsp;body&nbsp;...)))]))))
<br>
<br>
(library&nbsp;(let-div)<br>

&nbsp;&nbsp;(import&nbsp;(r6rs)&nbsp;(mvlet))<br>

&nbsp;&nbsp;(export&nbsp;let-div)
<br>
<br>
&nbsp;&nbsp;(define&nbsp;(quotient+remainder&nbsp;n&nbsp;d)<br>

&nbsp;&nbsp;&nbsp;&nbsp;(let&nbsp;([q&nbsp;(quotient&nbsp;n&nbsp;d)])<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(values&nbsp;q&nbsp;(-&nbsp;n&nbsp;(*&nbsp;q&nbsp;d)))))<br>

&nbsp;&nbsp;(indirect-export&nbsp;(let-div&nbsp;quotient+remainder))<br>

&nbsp;&nbsp;(define-syntax&nbsp;let-div<br>

&nbsp;&nbsp;&nbsp;&nbsp;(syntax-rules&nbsp;()<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(_&nbsp;n&nbsp;d&nbsp;(q&nbsp;r)&nbsp;body0&nbsp;body&nbsp;...)<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(mvlet&nbsp;[(q&nbsp;r)&nbsp;(quotient+remainder&nbsp;n&nbsp;d)]<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body0&nbsp;body&nbsp;...)])))</tt>
<p>
<a name="g8"></a>

<h1><a name="./library:h8"></a>5. Reference Implementation<a name="sec:implementation"></a></h1>



<p>

<a name="g9"></a>

<h1><a name="./library:h9"></a>6. Issues<a name="sec:issues"></a></h1>



<p>

<a name="g10"></a>

<h2><a name="./library:h10"></a>6.1. Simpler library names</h2>



<p>
A single identifier, e.g., <tt>r6rs</tt>, could be allowed as an abbreviation
for a library name sequence containing just one identifier, e.g.,
<tt>(r6rs)</tt>.

<p>

<a name="g11"></a>

<h2><a name="./library:h11"></a>6.2. Expanding <tt>import</tt> and <tt>export</tt> form</h2>



<p>
The import and export forms could be allowed in macro expansions.
In that case, the exports and imports of a library can be determined only
by macro-expanding the library.

<p>

<a name="g12"></a>

<h2><a name="./library:h12"></a>6.3. <tt>co-export</tt> form</h2>



<p>
Better support for records may be useful, possibly through a co-export
form: <tt>(co-export&nbsp;&lt;co&nbsp;spec&gt;*)</tt>, where
&lt;co&nbsp;spec&gt; contains an identifier defined or imported into a library
followed by a list of other identifiers defined or imported into the
library:

<p>

    
    
   <TABLE><TR><TD nowrap align="left">
&lt;co&nbsp;spec&gt;</TD><TD nowrap align="center"><img src="math/library/0.gif" alt="<graphic>"></TD><TD nowrap align="left">(&lt;identifier&gt; &lt;identifier&gt;*)
</TD></TR></TABLE>

<p>
The meaning of a &lt;co&nbsp;spec&gt; is that if the first identifier becomes
exported, either through <tt>export</tt> or <tt>co-export</tt>, then the
remaining identifiers are also exported.
Similarly, if the first identifier is indirectly exported through
<tt>indirect-export</tt> or <tt>co-export</tt>, then then remaining
identifiers are indirectly exported.

<p>
To be useful for managing records, <tt>co-export</tt> must be allowed in
macro expansions.
In that case, the full exports of a library can be determined only by
macro-expanding the library.

<p>

<a name="g13"></a>

<h2><a name="./library:h13"></a>6.4. Implicit phasing</h2>



<p>
Instead of having the programmer declare import phases explicitly, phases
could be inferred from uses of the imported identifiers. 
In that case, determining the phase of an import would require
macro-expanding the library body.

<p>

<a name="g14"></a>

<h1><a name="./library:h14"></a>7. Acknowledgments</h1>



<p>
This SRFI was written in consultation with the full set of R6RS editors: 
Will Clinger, Kent Dybvig, Marc Feeley, Matthew Flatt, Manuel Serrano,
Michael Sperber, and Anton van&nbsp;Straaten.


<p>


<p>


<a name="g15"></a>

<h1><a name="./library:h15"></a>8. References</h1>





<p>
<p>[<a name="g16">1</a>] 
R.&nbsp;Kent Dybvig.
SRFI 93: R6rs syntax-case macros.
 <a class=ref href="http://srfi.schemers.org/srfi-93/srfi-93.html">Online version</a>.
<p>[<a name="g17">2</a>] 
Matthew Flatt.
Composable and compilable macros: You want it when?
In <i>International Conference on Functional Programming
  (ICFP'2002)</i>, 2002.
 <a class=ref href="http://www.cs.utah.edu/plt/publications/macromod.pdf">Online version</a>.
<p>[<a name="g18">3</a>] 
Richard&nbsp;A. Kelsey and Jonathan&nbsp;A. Rees.
Modules (in 'the incomplete scheme48 reference manual for release
  0.57').
2001.
 <a class=ref href="http://s48.org/0.57/manual/s48manual\_24.html">Online version</a>.
<p>[<a name="g19">4</a>] 
Oscar Waddell and R.&nbsp;Kent Dybvig.
Extending the scope of syntactic abstraction.
In <i>Conference Record of the Twenty Sixth Annual ACM Symposium
  on Principles of Programming Languages</i>,  203-213, January 1999.

<p>




<p>

<a name="g20"></a>

<h1><a name="./library:h16"></a>9. Copyright</h1>



<p>
Copyright &copy; Matthew Flatt and Kent Dybvig (2005-2006). All Rights Reserved.

<p>
Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the "Software"),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:

<p>
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

<p>
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE. 

<p>

 
 </body>
</html>
