<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html40/loose.dtd">
<html>
<head>
<base href="http://www.r6rs.org/">
<link type="text/css" rel="stylesheet" href="/r6rs.css">
<style>
body { width:7in }
dt {
  border-top: 1px solid #000;
  position: relative;
  left: 0;
  top: 1.1em;
  width: 8em;
  font-weight: bold;
}

dd {
  margin: 0 0 0 8em;
  padding: 0 0 0 .5em;
}
</style>
<title>R6RS Errata</title>
</head>
<body>
<h1>R6RS Errata</h1>

<h2>Revised<sup>5.97</sup> Report on the Algorithmic Language Scheme</h2>
<dl>
<dt>Title page</dt>
<dd>Will Clinger's name should not be listed among the current editors
on the main report and library documents.</dd>

<dt>&sect; 2</dt>
<dd>Requirement levels under "should not". The verb "mean" should be
"means" since the subject is singular.</dd>

<dt>&sect; 3.2, first sentence</dt>
<dd>"It useful to" &rArr; "It is useful to"</dd>

<dt>&sect; 3.3, first para, third sentence</dt>
<dd>The phrase "representing as flonums" is awkward. Perhaps "represented by flonums" is meant.</dd>

<dt>&sect; 4.2.1, production for &lt;string element&gt;</dt>
<dd>The two occurrences of &lt;intraline whitespace&gt; should have a
* after them.</dd>

<dt>&sect; 5.2, last para</dt>
<dd>"... binding of the
identifier that established [should be: establishes] the innermost
...". Similar sentences in this section use the present tense.</dd>

<dt>&sect; 5.10, first sentence<dt>
<dd>"... strings, hashtables, [and] records implicitly refer..."</dd>

<dt>&sect; 5.10, fourth para<dt>
<dd>"read-only-memory" should be "read-only memory".</dd>

<dt>&sect; 6.1, second para</dt>
<dd>"For example &lt;identifier> ..." should have a
comma after "example".</dd>

<dt>&sect; 7.1, fourth bullet of beginning itemize environment</dt>
<dd>Replace "The definitions may be both for local (unexported) and
exported bindings, and the set of initialization expressions to be
evaluated for their effects."  by "The definitions may be both for
local (unexported) and exported bindings, and the expressions 
are initialization expressions to be evaluated for their effects.</dd>

<dt>&sect; 7.1, near end</dt>
<dd>"The names <code>library</code>, <code>export</code>, 
  <code>import</code>, <code>for</code>, <code>run</code>, <code>expand</code>, <code>meta</code>, <code>import</code>, <code>export</code>, <code>only</code>, 
  <code>except</code>, <code>prefix</code>, <code>rename</code>, <code>and</code>, <code>or</code>, <code>>=</code>, and <code>&lt;=</code> appearing in 
  the library syntax are part of the syntax and are not reserved, [...]"  
  This should also include the name <code>not</code> as part of the syntax and not 
  reserved.</dd>

<dt>&sect; 7.2, second sentence</dt>
<dd>"Specifically, if a macro transformer is defined by a procedure
that calls a procedure from another library, then the latter library
must be run when expanding the latter.  The latter may not be needed
when the former is eventually run as part of a program, or it may be
needed for the former program's run time, too." &rArr; "For example,
if a macro transformer calls a procedure from library <var>A</var>,
then the library <var>A</var> must be instantiated before expanding
any use of the macro in library <var>B</var>.  Library <var>A</var>
may not be needed when library <var>B</var> is eventually run as part
of a program, or it may be needed for run time of library
<var>B</var>, too."</dd>

<dt>&sect; 7.2, note</dt>
<dd> The <i>Note:</i> at the end will be removed.</dd>

<dt>&sect; 10</dt>
<dd>the example for the macro expansion algorithm misses
    a pair of parens in the use of defun: <br />
         <code>(defun even? (n) (or = n 0) (odd? (- n 1)))</code><br />
      &rArr; <code>(defun even? (n) (or (= n 0) (odd? (- n 1))))</code>
</dd>

<dt>&sect; 10</dt>
<dd>The result of the second example, the let-syntax one, can't be
(e). I think it should be (3), but I haven't tested it.</dd>

<dt>&sect; 11.2.1</dt>
<dd>"The first from of define ..." &rArr "The first form of define ...".</dd>

<dt>&sect; 11.3, title</dt>
<dd>Replace "Bodies and sequences" by "Bodies".</dd>

<dt>&sect; 11.3, first sentence</dt>
<dd>"... let*-values, letrec, [or] letrec* expression[,] or that ..."</dd>

<dt>&sect; 11.4.6</dt>
<dd>strike "The <code>let*</code> keyword could be defined in terms of
<code>let</code> using <code>syntax-rules</code> (see section ...) as follows:"</dd>
<dd>The various reference to sample definitions will be replaced by
"Sample definitions of all the binding forms of this section in terms
of simpler forms are in appendix B" near the beginning of the section.</dd>

<dt>&sect; 11.4.6, implementation responsibilities for
<code>letrec*</code></dt>
<dd>"Implementations must 
detect references to a &lt;variable&gt; during the evaluation
of the &lt;init&gt; expressions."
&rArr;
"Implementations must, during the evaluation of an
&lt;init&gt; expression, detect references to the
value of the corresponding &lt;variable&gt; or the &lt;variable&gt; of
any of the bindings that follow it in &lt;bindings&gt; (using one
particular evaluation order)."</dd>

      <dt>&sect: 11.7.1, <code>expt</code>
<dd><code>expt</code> will be deleted from the list of procedures that
always return exact values for exact arguments.  Instead, a sentence
will be added: "Moreover, the procedure <code>expt</code> must return the correct exact
result provided its first argument is an exact real number object and
its second argument is an exact integer object."</dd>

<dt>&sect; 11.9, <code>for-each></code></dt>
<dd>Replace the return value 4 specified in the second example by "unspecified".</dd>

<dt>&sect; 11.11, Note</dt>
<dd>"Unicode defines a standard mapping between sequences of
      <i>Unicode scalar values</i> [...] and human-readable
      ``characters''."  &rArr; "Unicode defines a standard mapping
      between sequences of <i>Unicode scalar values</i> [...] and
      sequences of human-readable ``characters''."</dd>
<dd>"However, the Unicode scalar values in this range,
  the so-called <i>surrogates</i> [...]"
      &rArr;
"However, the Unicode code points in this range,
  the so-called <i>surrogates</i> [...]"

<dt>Appendix B, <code>letrec</code></dt>
<dd>"read to or write from" &rArr; "read from or write to"</dd>

<dt>Appendix E, 14th bullet</dt>
<dd>"The !#r6rs comment" &rArr; "The #!r6rs comment"</dd>
</dl>

<h2>Standard Libraries</h2>

<dl>
  <dt>&sect; 2.9</dt>
      <dd><code>utf16->string!</code> &rArr;
	<code>utf16->string</code>,
	<code>utf32->string!</code> &rArr; <code>utf32->string</code>
      </dd>

      <dt>&sect; 3</dt>
      <dd>"An implementation may check whether <var>handler</var> is an appropriate argument
before applying it." &rArr; "An
implementation may check whether <var>proc</var> is an appropriate argument
before applying it."
</dd>

  <dt>&sect; 6.2</dt>
  <dd>"reocrd" &rArr; "record"</dd>
  <dd>
	<pre>(define-record-type frob
  (fields (mutable widget getwid setwid!))
  (protocol
    (lambda (p) (p (make-widget n)))))</pre>
	&rArr;
		<pre>(define-record-type frob
  (fields (mutable widget getwid setwid!))
  (protocol
    (lambda (p) 
      (lambda (n) (p (make-widget n))))))</pre>

  <dt>&sect; 6.3, <code>make-record-constructor-constructor</code></dt>
  <dd><br>"The procedure returned by
<var>protocol</var> should call <var>p</var> once with the number of arguments
it expects" &rArr;
"The procedure returned by
<var>protocol</var> should call <var>p</var> once with the number of arguments
<var>p</var> expects"
  <dd>The procedure returned by <var>protocol</var> should call <var>n</var> once with
the number of arguments it expects, call the procedure <var>p</var> it
returns once with the number of arguments it expects" &rArr; "The
procedure returned by <var>protocol</var> should call <var>n</var>
once with the number of arguments <var>n</var> expects, call the
procedure <var>p</var> it returns once with the number of arguments
<var>p</var> expects"</dd>

  <dd>"<var>Protocol</var> may be <code>#f</code>, specifying a default value that
accepts one argument for each field of <var>rtd</var> (not including the
fields of its parent type, if any)."
	&rArr;
"<var>Protocol</var> may be <code>#f</code>, specifying a default constructor that
accepts one argument for each field of <var>rtd</var> (not including the
fields of its parent type, if any)."</dd>
  <dd>"If <var>rtd</var> is an extension of another type,
then <var>parent-constructor-descriptor</var> must be either <code>#f</code> or
itself specify a default constructor.  In this case, the default
<var>protocol</var> procedure behaves as if it were:"
&rArr;
"If <var>rtd</var> is an extension of another type,
then <var>parent-constructor-descriptor</var> must be either <code>#f</code> or
itself specify a default constructor, and, the default
<var>protocol</var> procedure behaves as if it were:"</dd>
<dd>"If <var>rtd</var> is an extension of another record type, and
<var>parent-constructor-descriptor</var> or <var>protocol</var> is <code>#f</code>, <var>protocol</var> must
also be <code>#f</code>, and a default constructor descriptor is as
described above is also assumed."
""If <var>rtd</var> is an extension of another record type, and 
<var>parent-constructor-descriptor</var> or the <var>protocol</var> of <var>parent-constructor-descriptor</var> is <code>#f</code>, <var>protocol</var> must
also be <code>#f</code>, and a default constructor descriptor as
described above is also assumed."
</dd>


  <dt>&sect; 6.3, 11th para</dt>
  <dd>"Moreover, if <code>record-rtd</code> (see ``Inspection'' below)
is called an instance of the record type [...]"
	&rArr;
	Moreover, if <code>record-rtd</code> (see ``Inspection'' below)
is called with an instance of the record type [...]
  <dd>"make-record-type" should read "make-record-type-descriptor":<br />
    "If fields is modified after make-record-type has been called..." 
    &rArr; "If fields is modified after make-record-type-descriptor has
    been called..."
  </dd>
<dt>&sect; 7.1, examples</dt>
<dd>
<ul><li><code>(&amp;error)</code> &rArr; <code>(make-error)</code></li>
<li><code>(&amp;message (message "..."))</code> &rArr; <code>(make-message-condition  
"...")</code> (3x)</li>
<li><code>(&amp;violation)</code> &rArr; <code>(make-violation)</code></li>
<li><code>(&amp;warning)</code> &rArr;
<code>(make-warning)</code></li>
</ul></dd>

      <dt>&sect; 8.2.3</dt>
      <dd>"<code>line</code> for flushing upon line endings or reading
      until line endings" &rArr;
	"<code>line</code> for flushing upon line and reading up to line
endings, or other implementation-dependent behavior"
	</dd>
      <dt>&sect; 8.2.6, <code>port-has-set-port-position!?</code></dt>
      <dd><br>"The <code>port-has-set-port-position?</code> procedure"
      &rArr; "The <code>port-has-set-port-position!?</code> procedure"</dd>

      <dt>&sect; 11.2, <code>fxarithmetic-shift</code></dt>
      <dd><code>(* <var>fx1</var> (expt 2 <var>fx2</var>))</code>
      &rArr; <code>(floor (* <var>fx1</var> (expt 2 <var>fx2</var>)))</code>

      <dt>&sect; 11.2, <code>fxarithmetic-shift-left</code></dt>
      <dd><code>fixnum-</code> &rArr; <code>fx-</code></dd>
      
      <dt>&sect; 11.2, <code>fxcopy-bit</code></dt>
      <dd>"The <code>fxcopy-bit</code> procedure returns the result of replacing
	the <var>fx2</var>th bit of <var>fx1</var> by the <var>fx2</var>th bit of
	    <var>fx3</var> ..."
	    &rArr;
	    "The <code>fxcopy-bit</code> procedure returns the result of replacing
	the <var>fx2</var>th bit of <var>fx1</var> by <var>fx3</var> ..."</dd>

      <dt>&sect; 12.8, definition of <code>syntax-rules</code></dt>
      <dd>The definition of <code>syntax-rules</code> will be replaced
      by:
<pre>(define-syntax syntax-rules
  (lambda (x)
    (syntax-case x ()
      [(_ (k ...) [(_ . p) t] ...)
       #'(lambda (x)
           (syntax-case x (k ...)
             [(_ . p) #'t] ...))])))</pre>
	</dd>
      <dd>
      Moreover, the phrase ", and that at most one fender
is present in each clause" will be removed.</dd>

      <dt>&sect; 16, <code>eval</code></dt>
      <dd>"<i>environment-specifier</i>" &rArr;
      "<i>environment</i>"</dd>
      <dd>"and <var>environment-specifier</var> must be a <i>library
      specifier</i>"
	&rArr;
	"and <var>environment</var> must be an <i>environment</i>"
	
      <dt>&sect; 19, <code>scheme-report-environment</code></dt>
      <dd><code>interaction-environment</code> will be added to the
      list of omitted identifiers.</dd>
</dl>


<h2>Non-normative appendices</h2>
    <dl>
      <!-- one of (DD DT) -->
      <dt>Appendix C</dt>
      <dd>replace "For <code>raise</code> forms a &lt;cond clause&gt;
      may take one of the follow forms:" by "For <code>guard</code>"
      forms a &lt;cond clause&gt; may take one of the following
      forms:"</dd>
    </dl>

<h2>Rationale document</h2>

<dl>
<dt>pg 1</dt>
<dd>The text under "*** DRAFT ***" points out that the Rationale document is not formally part of the ratification process of the report.  This also means that the document is still subject to editorial changes, particularly additions.</dd>

<dt>various places</dt>
<dd>artefact &rArr; artifact</dd>

<dt>&sect; 3.1, first para, first sentence</dt>
<dd>Infinities and NaNs and [delete] are ...</dd>

<dt>&sect; 4.1.1, pg 4, para 3 line 1</dt>
<dd>remove extra space before the comma in "Scheme ,"</dd>

<dt>&sect; 4.2, para 1</dt>
<dd>a kind of command" &rArr; "a kind of comment"</dd>

<dt>chapter 6</dt>
<dd>"distinguishes the responsibilities of the
implementation from those of the implementation" &rArr; "distinguishes
the responsibilities of the programmer from those of the
implementation"</dd>

<dt>&sect; 7.7, fifth sentence</dt>
<dd>... natural means for represent [should be
representing] hierarchical ...</dd>

<dt>&sect; 7.7, sixth sentence</dt>
<dd>The hierarchical structure makes it easy
formulating [should be to formulate] policies for choosing unique
names, [no comma needed] or possible storage formats in a file system.</dd>

<dt>&sect; 8, first para, fourth sentence</dt>
<dd>... was not really sufficient
do [should be to] describe  ...</dd>

<dt>&sect; 8, second para, second-to-last sentence</dt>
<dd>... being able to
distribute programs as [should be is] one of the goals ...</dd>

<dt>&sect; 10, first para, first sentence</dt>
<dd>... macro expansion is
considerable [should be considerably] more involved ...</dd>

<dt>&sect; 11.5.1, first sentence</dt>
<dd>"The above definition of eqv?" -- delete "above", since it's not referenced
above</dd>

<dt>&sect; 11.6.5, para 1</dt>
<dd>t2 &rArr; t<sub>2</sub></dd>

<dt>&sect; 11.6.7, first sentence</dt>
<dd>"<code>integer</code> behavior" &rArr; "<code>integer?</code>" (missing question mark and redundant "behavior")</dd>

<dt>&sect; 11.7, first para, second sentence</dt>
<dd>"The primary goal ... were
[should be was] to improve ..."</dd>

<dt>&sect; 11.9.2, pg 13, col 2, 1st display</dt>
<dd>remove extra space after "values"</dd>

<dt>&sect; 11.9.2, last para</dt>
<dd>"preventing a program to make" &rArr; "preventing a program from making"</dd>

<dt>&sect; 18.5, para 2</dt>
<dd>"chooses to represent that ADT by <b>a</b> record type"</dd>

<dt>&sect; 18.5, last sentence</dt>
<dd>"that use record" &rArr; "that use records"

<dt>&sect; 20.5, last sentence</dt>
<dd>"some procedures many procedures" &rArr;  "many procedures"

<dt>&sect; 20.7, 1st sentence</dt>
<dd>"is fresh"  &rArr; "are fresh"</dd>

<dt>&sect; 21, second para, second-to-last sentence</dt>
<dd>extra space in the word "insufficient".</dd>

<dt>&sect; 25, first para, first sentence</dt>
<dd>... or subsets of a finite sets
[should be set] to describe ...</dd>

<dt>&sect; 26, second para, first sentence</dt>
<dd>remove extra space after "rnrs".</dd>

<dt>&sect; 27, first bullet</dt>
<dd>"... specification of higher-procedures" should be
"higher-order procedures"</dd>

<dt>&sect; 28, first sentence</dt>
<dd>The presence of mutable strings [causes] problems ...</dd>

</dl>

</body>
</html>
